(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1168:function(t,e,n){"use strict";n.r(e);n(276),n(32),n(83),n(15),n(146);var o=n(311),r={data:function(){return{startScreen:!0,showInstructions:!0,current:0,round:0,roundPoints:0,screen:!0,loaded:!1,showResult:!1,showPoints:!1,guess:"",items:[],nextItems:[]}},watch:{showResult:function(){var t=this;if(this.showResult){var e={price:0};new o.a.Tween(e).to({price:this.currItem.price},1200).easing(o.a.Easing.Quadratic.InOut).onUpdate((function(){t.$refs.priceReveal.innerText="$".concat(Math.round(e.price).toLocaleString())})).onComplete((function(){t.showPoints=!0})).start()}},guess:function(){var t=this.getGuessNum(),e=t>0?"$".concat(t.toLocaleString()):"";this.guess=e}},mounted:function(){var t=this;this.fetchArtworks((function(e){t.items=e,t.loaded=!0,t.preload(e[0]),t.preload(e[1])}));this.$requestAnimationFrame((function(time){o.a.update(time)}))},computed:{currItem:function(){return this.items[this.current]},points:function(){var t=this.currItem.price;return this.calcPoints(t,this.getGuessNum())}},methods:{onStart:function(){this.screen=!1,this.startScreen=!1,this.roundPoints=0},getGuessNum:function(){return Number(String(this.guess).replace(/\D/g,""))},fetchArtworks:function(t){var e=localStorage.getItem("seen");fetch("https://neal.fun/api/auction-game/getItems",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seen:e||[]})}).then((function(t){return t.json()})).then((function(e){t(e)}))},nextItem:function(){var t=this,e=this.current,n=this.round,o=this.items,r=this.roundPoints+this.points;if(this.addToIndex(o[e].id),e+2<o.length&&this.preload(o[e+2]),this.guess="",e<o.length-1){var c=8==n,d=c?0:n+1;this.showInstructions=!1,this.roundPoints=r,this.round=d,this.screen=c,this.current++,this.showPoints=!1,this.showResult=!1}else this.fetchArtworks((function(e){t.roundPoints=r,t.round=0,t.screen=!0,t.current=0,t.showPoints=!1,t.showResult=!1,t.items=e,t.preload(e[0]),t.preload(e[1])}))},addToIndex:function(t){var e=JSON.parse(localStorage.getItem("seen"));e?(e.push(t),e.length>400&&e.shift()):e=[t],localStorage.setItem("seen",JSON.stringify(e))},preload:function(t){var img=new Image,e=this.getImgUrl(t.img);img.src=e},parsePrice:function(t){return parseInt(t.split(",").join(""))},calcPoints:function(t,e){var n=t>e?e/t:t/e;return n*=2-n,Math.round(n*n*1e3)},getDuration:function(t){return t<1e5?1.7:t<5e5?2:t<1e6?2.3:t<5e6?2.8:3},toTop:function(){window.scrollTo(0,0)},getImgUrl:function(img){return"https://auction-game.neal.fun/"+img+".jpg"}}},c=(n(836),n(28)),component=Object(c.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"screen-site"},[e("nuxt-link",{attrs:{to:"/"}},[e("logo",{attrs:{color:"black"}})],1)],1),t._v(" "),e("div",{staticClass:"screen-border"}),t._v(" "),e("div",[t.screen?e("div",{staticClass:"screen-wrapper"},[e("img",{staticClass:"screen-sold",attrs:{src:"/auction-game/sold.png"}}),t._v(" "),e("div",{staticClass:"screen-inner"},[e("div",{staticClass:"screen-title"},[t._v("The Auction Game")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.startScreen,expression:"!startScreen"}],staticClass:"screen-score"},[t._v("\n          "+t._s(t.roundPoints)+" points\n        ")]),t._v(" "),e("button",{staticClass:"screen-play",on:{click:t.onStart}},[t._v("\n          "+t._s(t.startScreen?"Start":"Play Again")+"\n        ")])])]):e("div",{staticClass:"game-wrapper"},[e("div",{staticClass:"art-wrapper"},[e("div",[e("div",{staticClass:"round-wrapper"},[e("div",{staticClass:"round-points"},[t._v("Round "+t._s(t.round+1)+"/9")])]),t._v(" "),e("div",{staticClass:"art-title"},[t._v(t._s(t.currItem.title))]),t._v(" "),e("div",{staticClass:"image-wrapper"},[e("div",{staticClass:"art-image-wrapper"},[e("img",{staticClass:"art-image",attrs:{src:t.getImgUrl(t.currItem.img)}}),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:t.showPoints,expression:"showPoints"}],staticClass:"sold",attrs:{src:"/auction-game/sold.png"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}],ref:"priceReveal",staticClass:"price-reveal"})]),t._v(" "),e("div",{staticClass:"art-author"},[t._v("\n            "+t._s(t.currItem.artist+(t.currItem.date?", "+t.currItem.date:""))+"\n          ")]),t._v(" "),e("div",{staticClass:"input-wrapper"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showPoints,expression:"!showPoints"}],staticClass:"guess-row"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.guess,expression:"guess"}],staticClass:"price-input",attrs:{disabled:t.showResult,pattern:"\\d*",placeholder:"$0"},domProps:{value:t.guess},on:{input:function(e){e.target.composing||(t.guess=e.target.value)}}}),t._v(" "),e("button",{staticClass:"submit",attrs:{disabled:t.showResult},on:{click:function(e){t.showResult=!0}}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showInstructions&&!t.showPoints,expression:"showInstructions && !showPoints"}],staticClass:"instruction"},[t._v("\n              Guess the auction price\n            ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPoints,expression:"showPoints"}],staticClass:"next-row"},[e("div",{staticClass:"points-wrapper"},[e("div",{staticClass:"points-count"},[t._v(t._s(t.points)+" points")])]),t._v(" "),e("button",{staticClass:"next-button",on:{click:t.nextItem}},[t._v("Next")])])])])])])])])}),[],!1,null,"bcea5b08",null);e.default=component.exports;installComponents(component,{Logo:n(288).default})},472:function(t,e,n){var content=n(837);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(108).default)("417064c4",content,!0,{sourceMap:!1})},836:function(t,e,n){"use strict";n(472)},837:function(t,e,n){var o=n(107)(!1);o.push([t.i,'.container[data-v-bcea5b08]{background:#fff;height:100vh}.art-wrapper[data-v-bcea5b08]{margin-left:auto;margin-right:auto;max-width:600px;text-align:center;padding:0 20px}.art-image[data-v-bcea5b08]{max-width:500px;max-height:500px;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none}.art-title[data-v-bcea5b08]{font-size:30px;margin-bottom:10px;font-family:"PTSerif",serif;font-weight:700;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.art-author[data-v-bcea5b08]{font-size:20px;margin-top:8px;margin-bottom:8px;font-family:"Roboto";font-weight:lighter;color:#a0a0a0}.input-wrapper[data-v-bcea5b08]{margin-top:40px}.guess-row[data-v-bcea5b08]{display:flex;align-content:center;justify-content:center;height:50px;position:relative}.price-reveal[data-v-bcea5b08]{position:absolute;bottom:13%;text-align:center;font-size:28px;padding-top:12px;padding-bottom:12px;background:hsla(0,0%,100%,.9);width:100%;font-weight:700;color:#10ac84;font-family:"Roboto",sans-serif}.image-wrapper[data-v-bcea5b08]{position:relative;width:auto}.submit[data-v-bcea5b08]{width:46px;height:100%;background:#10ac84;display:inline-block;position:relative;cursor:pointer;background-size:30px 30px;background-repeat:no-repeat;background-position:50%;border:none;outline:none;padding:0;background-image:url(/auction-game/gavel.svg)}.submit[data-v-bcea5b08]:hover{background-image:url(/auction-game/gavel-down-hover.svg)}.submit[data-v-bcea5b08]:disabled{background-image:url(/auction-game/gavel-down.svg);border-color:#fff;background-color:#f1f2f6}.points-count[data-v-bcea5b08]{font-size:24px;font-family:"Roboto",sans-serif;color:#10ac84}.points-wrapper[data-v-bcea5b08]{display:inline-block;border-radius:5px;width:115px;margin-right:30px;margin-left:8px;text-align:left}.next-button[data-v-bcea5b08]{padding:9px 20px;font-size:22px;color:#fff;background:#000;cursor:pointer;display:inline-block;border:none;font-weight:700;position:sticky;bottom:0}.game-wrapper[data-v-bcea5b08]{padding-top:140px;padding-bottom:100px;height:100%;background:#fff}.round-wrapper[data-v-bcea5b08]{padding-left:10px;padding-right:12px;text-align:center}.round-points[data-v-bcea5b08]{font-size:22px;color:#10ac84;font-weight:700}.art-image-wrapper[data-v-bcea5b08]{position:relative;display:inline-block}.sold[data-v-bcea5b08]{position:absolute;top:10px;right:10px;max-width:80px;transform:rotate(8deg);transform-origin:50%}.instruction[data-v-bcea5b08]{text-align:center;font-size:18px;padding-top:8px}.chart-wrapper[data-v-bcea5b08]{width:30px;height:30px;display:inline-block;position:relative;top:7px;border-radius:100%;box-shadow:inset 0 0 0 9px #f1f2f6}.screen-wrapper[data-v-bcea5b08]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center}.screen-inner[data-v-bcea5b08]{font-family:"PT Serif",serif;text-align:center;position:relative;pointer-events:none;z-index:9}.screen-title[data-v-bcea5b08]{font-size:54px;color:#000}.screen-play[data-v-bcea5b08],.screen-title[data-v-bcea5b08]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.screen-play[data-v-bcea5b08]{padding:15px 30px;font-size:28px;margin-top:80px;color:#fff;background:#000;cursor:pointer;display:inline-block;border:none;font-weight:700;pointer-events:auto}.screen-score[data-v-bcea5b08]{font-size:32px;text-align:center;margin-top:20px;margin-bottom:20px;color:#10ac84}.screen-score[data-v-bcea5b08],.screen-site[data-v-bcea5b08]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.screen-site[data-v-bcea5b08]{position:fixed;left:78px;top:78px;cursor:pointer;z-index:99;max-width:140px}.screen-sold[data-v-bcea5b08]{max-width:120px;position:absolute;transform:rotate(12deg);top:100px;right:100px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.screen-border[data-v-bcea5b08]{position:fixed;width:100%;height:100%;border:60px solid transparent;-o-border-image:url(/auction-game/border-frame.png);border-image:url(/auction-game/border-frame.png);top:0;left:0;pointer-events:none;border-image-repeat:round;border-image-slice:33.33%;z-index:999}.price-input[data-v-bcea5b08]{font-size:24px;padding:9px 0;width:165px;border:2px solid #10ac84;border-right:none;text-align:center;border-radius:0;outline:none!important;height:50px;box-sizing:border-box}.price-input[data-v-bcea5b08]:disabled{background:#f1f2f6!important;border-left:2px solid #f1f2f6;border-top:2px solid #f1f2f6;border-bottom:2px solid #f1f2f6}@media screen and (max-width:600px){.art-wrapper[data-v-bcea5b08]{margin-top:30px;margin-bottom:50px;padding:0;display:block}.art-image[data-v-bcea5b08]{max-width:100%;max-height:350px}.art-title[data-v-bcea5b08]{font-size:24px;line-height:1.4em;margin-bottom:7px;padding-left:12px;padding-right:12px}.art-author[data-v-bcea5b08]{font-size:16px;margin-top:5px;padding-left:10px;padding-right:10px}.input-wrapper[data-v-bcea5b08]{margin-top:20px}.price-reveal[data-v-bcea5b08]{font-size:26px}.points-count[data-v-bcea5b08]{font-size:20px}.game-wrapper[data-v-bcea5b08]{padding-top:40px;padding-bottom:40px}.round-points[data-v-bcea5b08]{font-size:18px;margin-bottom:15px}.screen-title[data-v-bcea5b08]{font-size:46px;padding-left:15px;padding-right:15px}.screen-play[data-v-bcea5b08]{margin-top:50px;margin-bottom:70px}.screen-site[data-v-bcea5b08]{max-width:100px;left:15px;top:15px}.screen-sold[data-v-bcea5b08]{top:30px;right:30px;max-width:80px}.screen-border[data-v-bcea5b08]{display:none}}@media screen and (max-width:350px){.sold[data-v-bcea5b08]{max-width:70px;right:15px}}@media screen and (max-height:950px){.art-image[data-v-bcea5b08]{max-height:330px}.art-title[data-v-bcea5b08]{font-size:24px}}',""]),t.exports=o}}]);